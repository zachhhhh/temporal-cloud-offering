import{f as c,a as i,c as P,s as B}from"../chunks/BWbQCZ69.js";import{i as I}from"../chunks/Che9Dmhg.js";import{o as L}from"../chunks/CNgpWDSg.js";import{p as R,a as U,T as F,U as r,z as b,$ as S,c as f,g as p,r as u,n as v,f as w,s as q,t as A}from"../chunks/KVv5Wq5H.js";import{i as _,s as D,a as E}from"../chunks/ozNNVPW2.js";import{h as G}from"../chunks/DL2-I4h1.js";import{g as H}from"../chunks/C2oB9cch.js";import{p as J}from"../chunks/BQ_P4szL.js";import{a as K}from"../chunks/B5Bwh81o.js";var N=c('<div class="animate-spin w-12 h-12 border-4 border-emerald-400 border-t-transparent rounded-full mx-auto mb-4"></div> <h1 class="text-xl font-semibold text-white">Verifying your sign-in link...</h1> <p class="text-zinc-400 mt-2">Please wait a moment</p>',1),O=c('<div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-xl font-semibold text-white">Successfully signed in!</h1> <p class="text-zinc-400 mt-2">Redirecting to dashboard...</p>',1),Q=c('<div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div> <h1 class="text-xl font-semibold text-white">Verification failed</h1> <p class="text-zinc-400 mt-2"> </p> <a href="/login" class="inline-block mt-4 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors">Try again</a>',1),W=c('<div class="min-h-screen bg-[#0d0620] flex items-center justify-center p-4"><div class="w-full max-w-md text-center"><!></div></div>');function ie(k,y){R(y,!1);const h=()=>E(J,"$page",$),[$,j]=D();let s=b("verifying"),n=b("");L(async()=>{const e=h().url.searchParams.get("token"),t=h().url.searchParams.get("email");if(!e||!t){r(s,"error"),r(n,"Invalid verification link");return}try{const a=await(await fetch(`/api/auth/verify?token=${e}&email=${encodeURIComponent(t)}`)).json();a.success&&a.user?(K.login(a.user),r(s,"success"),setTimeout(()=>H("/dashboard"),1500)):(r(s,"error"),r(n,a.error||"Verification failed"))}catch{r(s,"error"),r(n,"Failed to verify link")}}),I();var m=W();G("1xy6sat",e=>{F(()=>{S.title="Verifying... | Temporal Cloud"})});var g=f(m),M=f(g);{var z=e=>{var t=N();v(4),i(e,t)},C=e=>{var t=P(),d=w(t);{var a=o=>{var l=O();v(4),i(o,l)},T=o=>{var l=Q(),x=q(w(l),4),V=f(x,!0);u(x),v(2),A(()=>B(V,p(n))),i(o,l)};_(d,o=>{p(s)==="success"?o(a):o(T,!1)},!0)}i(e,t)};_(M,e=>{p(s)==="verifying"?e(z):e(C,!1)})}u(g),u(m),i(k,m),U(),j()}export{ie as component};
