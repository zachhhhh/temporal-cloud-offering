var R=Object.defineProperty;var S=t=>{throw TypeError(t)};var I=(t,e,s)=>e in t?R(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var T=(t,e,s)=>I(t,typeof e!="symbol"?e+"":e,s),A=(t,e,s)=>e.has(t)||S("Cannot "+s);var a=(t,e,s)=>(A(t,e,"read from private field"),s?s.call(t):e.get(t)),d=(t,e,s)=>e.has(t)?S("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),E=(t,e,s,i)=>(A(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);import{w as M,I as U,S as y,J as j,b as N,x,h as k,q as B,ah as C,y as H,d as O,j as q,ai as z,l as J,H as L,m as P,e as Y,o as D,aj as $,ak as G,a5 as F,z as K,g as Q,U as V}from"./KVv5Wq5H.js";import{s as W,g as X}from"./eAXd7Ly4.js";var u,l,o,_,p,v,g;class Z{constructor(e,s=!0){T(this,"anchor");d(this,u,new Map);d(this,l,new Map);d(this,o,new Map);d(this,_,new Set);d(this,p,!0);d(this,v,()=>{var e=M;if(a(this,u).has(e)){var s=a(this,u).get(e),i=a(this,l).get(s);if(i)U(i),a(this,_).delete(s);else{var f=a(this,o).get(s);f&&(a(this,l).set(s,f.effect),a(this,o).delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),i=f.effect)}for(const[r,n]of a(this,u)){if(a(this,u).delete(r),r===e)break;const c=a(this,o).get(n);c&&(y(c.effect),a(this,o).delete(n))}for(const[r,n]of a(this,l)){if(r===s||a(this,_).has(r))continue;const c=()=>{if(Array.from(a(this,u).values()).includes(r)){var b=document.createDocumentFragment();C(n,b),b.append(N()),a(this,o).set(r,{effect:n,fragment:b})}else y(n);a(this,_).delete(r),a(this,l).delete(r)};a(this,p)||!i?(a(this,_).add(r),j(n,c,!1)):c()}}});d(this,g,e=>{a(this,u).delete(e);const s=Array.from(a(this,u).values());for(const[i,f]of a(this,o))s.includes(i)||(y(f.effect),a(this,o).delete(i))});this.anchor=e,E(this,p,s)}ensure(e,s){var i=M,f=H();if(s&&!a(this,l).has(e)&&!a(this,o).has(e))if(f){var r=document.createDocumentFragment(),n=N();r.append(n),a(this,o).set(e,{effect:x(()=>s(n)),fragment:r})}else a(this,l).set(e,x(()=>s(this.anchor)));if(a(this,u).set(i,e),f){for(const[c,h]of a(this,l))c===e?i.skipped_effects.delete(h):i.skipped_effects.add(h);for(const[c,h]of a(this,o))c===e?i.skipped_effects.delete(h.effect):i.skipped_effects.add(h.effect);i.oncommit(a(this,v)),i.ondiscard(a(this,g))}else k&&(this.anchor=B),a(this,v).call(this)}}u=new WeakMap,l=new WeakMap,o=new WeakMap,_=new WeakMap,p=new WeakMap,v=new WeakMap,g=new WeakMap;function ae(t,e,s=!1){k&&q();var i=new Z(t),f=s?z:0;function r(n,c){if(k){const b=J(t)===L;if(n===b){var h=P();Y(h),i.anchor=h,D(!1),i.ensure(n,c),D(!0);return}}i.ensure(n,c)}O(()=>{var n=!1;e((c,h=!0)=>{n=!0,r(h,c)}),n||r(!1,null)},f)}let m=!1,w=Symbol();function ie(t,e,s){const i=s[e]??(s[e]={store:null,source:K(void 0),unsubscribe:F});if(i.store!==t&&!(w in s))if(i.unsubscribe(),i.store=t??null,t==null)i.source.v=void 0,i.unsubscribe=F;else{var f=!0;i.unsubscribe=W(t,r=>{f?i.source.v=r:V(i.source,r)}),f=!1}return t&&w in s?X(t):Q(i.source)}function re(){const t={};function e(){$(()=>{for(var s in t)t[s].unsubscribe();G(t,w,{enumerable:!1,value:!0})})}return[t,e]}function ne(t){var e=m;try{return m=!1,[t(),m]}finally{m=e}}export{Z as B,ie as a,ne as c,ae as i,re as s};
