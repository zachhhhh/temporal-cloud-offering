import{f as l,a as i,c as j,s as F}from"../chunks/kzzh-_L7.js";import"../chunks/8_kfmD-X.js";import{o as S}from"../chunks/DTTKcyLN.js";import{p as Y,a as q,T as A,U as r,z as $,$ as D,c as x,g as d,r as w,n as v,f as b,s as G,t as H}from"../chunks/yF97ak1k.js";import{i as _}from"../chunks/CzlK3FID.js";import{h as J}from"../chunks/Bk5ptWNf.js";import{i as K}from"../chunks/C0gw4Bx3.js";import{s as N,a as O}from"../chunks/C8-YtTiG.js";import{g as M}from"../chunks/vG9K1qYa.js";import{p as Q}from"../chunks/BNmkd4NZ.js";import{a as W}from"../chunks/BQTcrtsO.js";var X=l('<div class="animate-spin w-12 h-12 border-4 border-emerald-400 border-t-transparent rounded-full mx-auto mb-4"></div> <h1 class="text-xl font-semibold text-white">Verifying your sign-in link...</h1> <p class="text-zinc-400 mt-2">Please wait a moment</p>',1),Z=l('<div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-xl font-semibold text-white">Successfully signed in!</h1> <p class="text-zinc-400 mt-2">Redirecting to dashboard...</p>',1),ee=l('<div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-xl font-semibold text-white">Email verified!</h1> <p class="text-zinc-400 mt-2">Your account has been verified. Redirecting to sign in...</p>',1),te=l('<div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div> <h1 class="text-xl font-semibold text-white">Verification failed</h1> <p class="text-zinc-400 mt-2"> </p> <a href="/login" class="inline-block mt-4 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors">Try again</a>',1),re=l('<div class="min-h-screen bg-[#0d0620] flex items-center justify-center p-4"><div class="w-full max-w-md text-center"><!></div></div>');function pe(z,C){Y(C,!1);const p=()=>O(Q,"$page",T),[T,P]=N();let t=$("verifying"),c=$("");S(async()=>{const e=p().url.searchParams.get("token"),s=p().url.searchParams.get("email"),h=p().url.searchParams.get("type")||"magic_link";if(!e||!s){r(t,"error"),r(c,"Invalid verification link");return}try{const a=await(await fetch(`/api/auth/verify?token=${e}&email=${encodeURIComponent(s)}&type=${h}`)).json();a.success?a.verified?(r(t,"verified"),setTimeout(()=>M("/login"),2e3)):a.user&&(W.login(a.user),r(t,"success"),setTimeout(()=>M("/dashboard"),1500)):(r(t,"error"),r(c,a.error||"Verification failed"))}catch{r(t,"error"),r(c,"Failed to verify link")}}),K();var u=re();J("1xy6sat",e=>{A(()=>{D.title="Verifying... | Temporal Cloud"})});var k=x(u),V=x(k);{var B=e=>{var s=X();v(4),i(e,s)},L=e=>{var s=j(),h=b(s);{var g=o=>{var m=Z();v(4),i(o,m)},a=o=>{var m=j(),R=b(m);{var I=n=>{var f=ee();v(4),i(n,f)},U=n=>{var f=te(),y=G(b(f),4),E=x(y,!0);w(y),v(2),H(()=>F(E,d(c))),i(n,f)};_(R,n=>{d(t)==="verified"?n(I):n(U,!1)},!0)}i(o,m)};_(h,o=>{d(t)==="success"?o(g):o(a,!1)},!0)}i(e,s)};_(V,e=>{d(t)==="verifying"?e(B):e(L,!1)})}w(k),w(u),i(z,u),q(),P()}export{pe as component};
