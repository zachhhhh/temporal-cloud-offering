import{f as d,a as n,c as T,s as B}from"../chunks/BMDhiZVf.js";import{i as I}from"../chunks/BPZvvf-C.js";import{o as L}from"../chunks/BwOv3IO7.js";import{p as R,a as S,e as F,a3 as r,K as _,$ as K,c as u,g as p,r as g,n as v,f as k,s as U,t as q}from"../chunks/OpDIeaVH.js";import{i as y,s as A,a as D}from"../chunks/Is5Z81B9.js";import{h as E}from"../chunks/DXU610Kk.js";import{s as G,g as H}from"../chunks/DskSlQC2.js";import{a as J}from"../chunks/BD1ZCLaQ.js";const N=()=>{const t=G;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},O={subscribe(t){return N().page.subscribe(t)}};var Q=d('<div class="animate-spin w-12 h-12 border-4 border-emerald-400 border-t-transparent rounded-full mx-auto mb-4"></div> <h1 class="text-xl font-semibold text-white">Verifying your sign-in link...</h1> <p class="text-zinc-400 mt-2">Please wait a moment</p>',1),W=d('<div class="w-12 h-12 bg-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg></div> <h1 class="text-xl font-semibold text-white">Successfully signed in!</h1> <p class="text-zinc-400 mt-2">Redirecting to dashboard...</p>',1),X=d('<div class="w-12 h-12 bg-red-500 rounded-full flex items-center justify-center mx-auto mb-4"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></div> <h1 class="text-xl font-semibold text-white">Verification failed</h1> <p class="text-zinc-400 mt-2"> </p> <a href="/login" class="inline-block mt-4 px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors">Try again</a>',1),Y=d('<div class="min-h-screen bg-[#0d0620] flex items-center justify-center p-4"><div class="w-full max-w-md text-center"><!></div></div>');function ne(t,h){R(h,!1);const b=()=>D(O,"$page",$),[$,j]=A();let a=_("verifying"),l=_("");L(async()=>{const e=b().url.searchParams.get("token"),s=b().url.searchParams.get("email");if(!e||!s){r(a,"error"),r(l,"Invalid verification link");return}try{const o=await(await fetch(`/api/auth/verify?token=${e}&email=${encodeURIComponent(s)}`)).json();o.success&&o.user?(J.login(o.user),r(a,"success"),setTimeout(()=>H("/dashboard"),1500)):(r(a,"error"),r(l,o.error||"Verification failed"))}catch{r(a,"error"),r(l,"Failed to verify link")}}),I();var m=Y();E("1xy6sat",e=>{F(()=>{K.title="Verifying... | Temporal Cloud"})});var x=u(m),M=u(x);{var C=e=>{var s=Q();v(4),n(e,s)},V=e=>{var s=T(),f=k(s);{var o=i=>{var c=W();v(4),n(i,c)},z=i=>{var c=X(),w=U(k(c),4),P=u(w,!0);g(w),v(2),q(()=>B(P,p(l))),n(i,c)};y(f,i=>{p(a)==="success"?i(o):i(z,!1)},!0)}n(e,s)};y(M,e=>{p(a)==="verifying"?e(C):e(V,!1)})}g(x),g(m),n(t,m),S(),j()}export{ne as component};
